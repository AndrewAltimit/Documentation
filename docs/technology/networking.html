<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Networking</title>
    <meta name="description" content="Technology and Physics notes">
    
    <link rel="stylesheet" href="/Documentation/assets/css/main.css">
    <link rel="stylesheet" href="/Documentation/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  </head>
  <body>
    <div class="site-container">
      <!-- Navigation Sidebar -->
      <nav class="navigation-sidebar">
        <div class="site-title">
          <a href="/Documentation/">Andrews Notebook</a>
        </div>
        
        
        <ul class="nav-list">
          
            <li class="nav-section">
              <h3 class="nav-section-title">Technology</h3>
              
                <ul class="nav-items">
                  
                    <li>
                      <a href="/Documentation/docs/technology/linux.html" 
                         >
                        Linux Operating System
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/docker.html" 
                         >
                        Docker Containers
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/git.html" 
                         >
                        Git Version Control
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/ssh.html" 
                         >
                        SSH
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/vim.html" 
                         >
                        Vim Text Editor
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/neovim.html" 
                         >
                        Neovim
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/tmux.html" 
                         >
                        tmux
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/terraform.html" 
                         >
                        Terraform
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/ansible.html" 
                         >
                        Ansible
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/cicd.html" 
                         >
                        CI/CD Pipelines
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/programming_languages.html" 
                         >
                        Programming Languages
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/cuda.html" 
                         >
                        CUDA Programming
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/ollama.html" 
                         >
                        Ollama
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/cloudflare.html" 
                         >
                        Cloudflare
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/vpn.html" 
                         >
                        VPN Technologies
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/container_orchestration.html" 
                         >
                        Container Orchestration
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/elasticsearch.html" 
                         >
                        Elasticsearch
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/grafana.html" 
                         >
                        Grafana
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/kafka.html" 
                         >
                        Kafka
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/computer_networking.html" 
                         >
                        Computer Networking
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/security.html" 
                         >
                        Security Best Practices
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/message_queuing.html" 
                         >
                        Message Queuing
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/cryptography.html" 
                         >
                        Cryptography
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/identity_management.html" 
                         >
                        Identity Management
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/distributed_computing.html" 
                         >
                        Distributed Computing
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/api_design.html" 
                         >
                        API Design
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/cloud_computing.html" 
                         >
                        Cloud Computing
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/storage_technologies.html" 
                         >
                        Storage Technologies
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/websockets.html" 
                         >
                        WebSockets
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/async_programming.html" 
                         >
                        Async Programming
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/system_architecture.html" 
                         >
                        System Architecture
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/time_synchronization.html" 
                         >
                        Time Synchronization
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/big_data.html" 
                         >
                        Big Data Technologies
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/technology/sql_vs_nosql.html" 
                         >
                        SQL vs NoSQL
                      </a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li class="nav-section">
              <h3 class="nav-section-title">AI/ML</h3>
              
                <ul class="nav-items">
                  
                    <li>
                      <a href="/Documentation/docs/aiml/llm_fundamentals.html" 
                         >
                        LLM Fundamentals
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/tokenization.html" 
                         >
                        Tokenization
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/transformers.html" 
                         >
                        Transformers
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/llm_finetuning.html" 
                         >
                        LLM Fine-Tuning
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/lora.html" 
                         >
                        LoRA
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/rag.html" 
                         >
                        RAG
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/embeddings.html" 
                         >
                        Embeddings
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/diffusion_models.html" 
                         >
                        Diffusion Models
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/stable_diffusion.html" 
                         >
                        Stable Diffusion
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/computer_vision.html" 
                         >
                        Computer Vision
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/cnn.html" 
                         >
                        Convolutional Neural Networks
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/rnn.html" 
                         >
                        Recurrent Neural Networks
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/gan.html" 
                         >
                        Generative Adversarial Networks
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/reinforcement_learning.html" 
                         >
                        Reinforcement Learning
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/neural_architecture_search.html" 
                         >
                        Neural Architecture Search
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/edge_ai.html" 
                         >
                        Edge AI
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/model_optimization.html" 
                         >
                        Model Optimization
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/ai_ethics.html" 
                         >
                        AI Ethics
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/explainable_ai.html" 
                         >
                        Explainable AI
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/federated_learning.html" 
                         >
                        Federated Learning
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/aiml/mlops.html" 
                         >
                        MLOps
                      </a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li class="nav-section">
              <h3 class="nav-section-title">Physics</h3>
              
                <ul class="nav-items">
                  
                    <li>
                      <a href="/Documentation/docs/physics/quantum_computing.html" 
                         >
                        Quantum Computing
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/superconducting_quantum_computing.html" 
                         >
                        Superconducting Quantum Computing
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/topological_quantum_computing.html" 
                         >
                        Topological Quantum Computing
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/nuclear_fusion.html" 
                         >
                        Nuclear Fusion
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/plasma_physics.html" 
                         >
                        Plasma Physics
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/stellarators.html" 
                         >
                        Stellarators
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/tokamaks.html" 
                         >
                        Tokamaks
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/inertial_confinement_fusion.html" 
                         >
                        Inertial Confinement Fusion
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/magnet_technology.html" 
                         >
                        Magnet Technology
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/cryogenics.html" 
                         >
                        Cryogenics
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/vacuum_technology.html" 
                         >
                        Vacuum Technology
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/general_relativity.html" 
                         >
                        General Relativity
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/special_relativity.html" 
                         >
                        Special Relativity
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/quantum_mechanics.html" 
                         >
                        Quantum Mechanics
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/string_theory.html" 
                         >
                        String Theory
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/particle_physics.html" 
                         >
                        Particle Physics
                      </a>
                    </li>
                  
                    <li>
                      <a href="/Documentation/docs/physics/quantum_entanglement.html" 
                         >
                        Quantum Entanglement
                      </a>
                    </li>
                  
                </ul>
              
            </li>
          
        </ul>
        
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        
          <header class="page-header">
            <h1>Networking</h1>
          </header>
        

        <article class="page-content">
          <!-- Custom styles are now loaded via main.scss -->

<p>Every time you open a web page, send a message, or stream a video, data travels through an intricate network of connections. Understanding how these networks function is essential for anyone working with technology—from developers optimizing applications to administrators ensuring reliable service.</p>

<h2 id="the-journey-of-a-network-packet">The Journey of a Network Packet</h2>

<p>Let’s start with something familiar: what happens when you type a URL and press Enter? This simple action triggers a cascade of network operations that we’ll use to explore fundamental concepts.</p>

<p>First, your browser needs to find the server. It sends a DNS query to translate the domain name into an IP address. This query itself is a network packet that must navigate through routers, switches, and servers to reach its destination. Along the way, it encounters the same challenges that all network traffic faces: congestion, routing decisions, and potential delays.</p>

<h2 id="understanding-network-performance">Understanding Network Performance</h2>

<p>Before diving into protocols and layers, let’s understand what makes networks fast or slow. When network engineers talk about performance, they’re often dealing with queues—just like lines at a coffee shop.</p>

<h3 id="why-networks-need-queues">Why Networks Need Queues</h3>

<p>Imagine a router as a busy intersection. Packets arrive from multiple sources, but the router can only forward them one at a time. When packets arrive faster than they can be processed, they must wait in a queue. This waiting time directly impacts your experience—it’s why video calls sometimes freeze or web pages load slowly.</p>

<p>This real-world problem motivates our first technical deep-dive: queueing theory. By modeling network devices as queuing systems, we can predict and optimize performance.</p>

<h3 id="modeling-network-queues">Modeling Network Queues</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="n">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="k">class</span> <span class="nc">NetworkQueue</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Model a network device (like a router) as a queue to predict performance.
    
    This M/M/1 model helps us understand:
    - How long packets wait in router buffers
    - When a network link becomes congested
    - How to size buffers appropriately
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">arrival_rate</span><span class="p">,</span> <span class="n">service_rate</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lambda_</span> <span class="o">=</span> <span class="n">arrival_rate</span>  <span class="c1"># λ
</span>        <span class="n">self</span><span class="p">.</span><span class="n">mu</span> <span class="o">=</span> <span class="n">service_rate</span>       <span class="c1"># μ
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rho</span> <span class="o">=</span> <span class="n">arrival_rate</span> <span class="o">/</span> <span class="n">service_rate</span>  <span class="c1"># ρ = λ/μ
</span>        
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">rho</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">System is unstable (ρ &gt;= 1)</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">average_customers</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">L = ρ / (1 - ρ)</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">rho</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">rho</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">average_queue_length</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Lq = ρ² / (1 - ρ)</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">rho</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">rho</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">average_waiting_time</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">W = 1 / (μ - λ)</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">mu</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">lambda_</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">average_queue_time</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Wq = ρ / (μ - λ)</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">rho</span> <span class="o">/</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">mu</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">lambda_</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">response_time_distribution</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">P(T ≤ t) = 1 - e^(-(μ-λ)t)</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">np</span><span class="p">.</span><span class="nf">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">mu</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">lambda_</span><span class="p">)</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Discrete event simulation</span><span class="sh">"""</span>
        <span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">customers_in_system</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">while</span> <span class="n">current_time</span> <span class="o">&lt;</span> <span class="n">duration</span><span class="p">:</span>
            <span class="c1"># Next arrival
</span>            <span class="n">inter_arrival</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">exponential</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">self</span><span class="p">.</span><span class="n">lambda_</span><span class="p">)</span>
            <span class="n">arrival_time</span> <span class="o">=</span> <span class="n">current_time</span> <span class="o">+</span> <span class="n">inter_arrival</span>
            
            <span class="c1"># Service time
</span>            <span class="n">service_time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">exponential</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">self</span><span class="p">.</span><span class="n">mu</span><span class="p">)</span>
            
            <span class="n">events</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span>
                <span class="sh">'</span><span class="s">time</span><span class="sh">'</span><span class="p">:</span> <span class="n">arrival_time</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">arrival</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">service_time</span><span class="sh">'</span><span class="p">:</span> <span class="n">service_time</span>
            <span class="p">})</span>
            
            <span class="n">current_time</span> <span class="o">=</span> <span class="n">arrival_time</span>
            
        <span class="k">return</span> <span class="n">events</span>

<span class="c1"># Example: Analyzing a home router handling video streaming
# Your router receives 800 packets/second during Netflix streaming
# It can forward 1000 packets/second to your device
</span><span class="n">router</span> <span class="o">=</span> <span class="nc">NetworkQueue</span><span class="p">(</span><span class="n">arrival_rate</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">service_rate</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Average packets waiting: </span><span class="si">{</span><span class="n">router</span><span class="p">.</span><span class="nf">average_queue_length</span><span class="p">()</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Average delay added: </span><span class="si">{</span><span class="n">router</span><span class="p">.</span><span class="nf">average_queue_time</span><span class="p">()</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s"> ms</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># This 4ms delay might not seem like much, but it adds up across multiple hops!
</span></code></pre></div></div>

<h3 id="when-single-queues-arent-enough">When Single Queues Aren’t Enough</h3>

<p>Real networks have multiple devices, each adding its own delays. To understand end-to-end performance, we need to model networks of queues. This is particularly important for cloud applications where data might traverse dozens of devices.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MultiHopNetwork</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Model traffic flow through multiple network devices.
    
    Use this to analyze:
    - Cloud application latency (web server → load balancer → app server → database)
    - Content delivery networks
    - Multi-datacenter architectures
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">num_nodes</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">num_nodes</span> <span class="o">=</span> <span class="n">num_nodes</span>
        <span class="n">self</span><span class="p">.</span><span class="n">routing_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">((</span><span class="n">num_nodes</span><span class="p">,</span> <span class="n">num_nodes</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="n">external_arrivals</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">service_rates</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">set_routing</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">,</span> <span class="n">probability</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Set routing probability between nodes</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">routing_matrix</span><span class="p">[</span><span class="n">from_node</span><span class="p">,</span> <span class="n">to_node</span><span class="p">]</span> <span class="o">=</span> <span class="n">probability</span>
        
    <span class="k">def</span> <span class="nf">solve_traffic_equations</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Solve λᵢ = γᵢ + Σⱼ λⱼ * Pⱼᵢ</span><span class="sh">"""</span>
        <span class="c1"># Form system: (I - P^T)λ = γ
</span>        <span class="n">I</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">eye</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">num_nodes</span><span class="p">)</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">I</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">routing_matrix</span><span class="p">.</span><span class="n">T</span>
        
        <span class="c1"># Solve for arrival rates at each node
</span>        <span class="n">arrival_rates</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="nf">solve</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">external_arrivals</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">arrival_rates</span>
    
    <span class="k">def</span> <span class="nf">analyze_performance</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Analyze performance metrics for each node</span><span class="sh">"""</span>
        <span class="n">arrival_rates</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">solve_traffic_equations</span><span class="p">()</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">num_nodes</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">arrival_rates</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">self</span><span class="p">.</span><span class="n">service_rates</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">queue</span> <span class="o">=</span> <span class="nc">MM1Queue</span><span class="p">(</span><span class="n">arrival_rates</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">self</span><span class="p">.</span><span class="n">service_rates</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">metrics</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span>
                    <span class="sh">'</span><span class="s">node</span><span class="sh">'</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
                    <span class="sh">'</span><span class="s">utilization</span><span class="sh">'</span><span class="p">:</span> <span class="n">queue</span><span class="p">.</span><span class="n">rho</span><span class="p">,</span>
                    <span class="sh">'</span><span class="s">avg_delay</span><span class="sh">'</span><span class="p">:</span> <span class="n">queue</span><span class="p">.</span><span class="nf">average_waiting_time</span><span class="p">(),</span>
                    <span class="sh">'</span><span class="s">avg_queue</span><span class="sh">'</span><span class="p">:</span> <span class="n">queue</span><span class="p">.</span><span class="nf">average_customers</span><span class="p">()</span>
                <span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">metrics</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span>
                    <span class="sh">'</span><span class="s">node</span><span class="sh">'</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
                    <span class="sh">'</span><span class="s">utilization</span><span class="sh">'</span><span class="p">:</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span>
                    <span class="sh">'</span><span class="s">avg_delay</span><span class="sh">'</span><span class="p">:</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">),</span>
                    <span class="sh">'</span><span class="s">avg_queue</span><span class="sh">'</span><span class="p">:</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">)</span>
                <span class="p">})</span>
                
        <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div></div>

<h2 id="finding-the-best-path-graph-theory-in-networks">Finding the Best Path: Graph Theory in Networks</h2>

<p>Now that we understand how individual devices handle traffic, let’s zoom out to see the bigger picture. The internet is essentially a massive graph where routers are nodes and connections are edges. Finding efficient paths through this graph is crucial for performance.</p>

<h3 id="why-path-selection-matters">Why Path Selection Matters</h3>

<p>When you connect to a website hosted on another continent, your data doesn’t take a direct path. It hops through multiple networks, each making routing decisions. Poor routing can double or triple your latency, making applications feel sluggish.</p>

<p>Let’s implement the algorithms that routers use to find optimal paths:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">heapq</span>
<span class="kn">from</span> <span class="n">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="k">class</span> <span class="nc">NetworkGraph</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Advanced graph algorithms for network routing</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">graph</span> <span class="o">=</span> <span class="nf">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vertices</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Add edge with weight and optional metrics</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">u</span><span class="p">].</span><span class="nf">append</span><span class="p">({</span>
            <span class="sh">'</span><span class="s">vertex</span><span class="sh">'</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">:</span> <span class="n">weight</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">metrics</span><span class="sh">'</span><span class="p">:</span> <span class="n">metrics</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="p">})</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vertices</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vertices</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">dijkstra_multi_metric</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Dijkstra with configurable metric</span><span class="sh">"""</span>
        <span class="n">distances</span> <span class="o">=</span> <span class="p">{</span><span class="n">vertex</span><span class="p">:</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">infinity</span><span class="sh">'</span><span class="p">)</span> <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">vertices</span><span class="p">}</span>
        <span class="n">distances</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">predecessors</span> <span class="o">=</span> <span class="p">{</span><span class="n">vertex</span><span class="p">:</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">vertices</span><span class="p">}</span>
        
        <span class="n">pq</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">source</span><span class="p">)]</span>
        
        <span class="k">while</span> <span class="n">pq</span><span class="p">:</span>
            <span class="n">current_distance</span><span class="p">,</span> <span class="n">current_vertex</span> <span class="o">=</span> <span class="n">heapq</span><span class="p">.</span><span class="nf">heappop</span><span class="p">(</span><span class="n">pq</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">current_distance</span> <span class="o">&gt;</span> <span class="n">distances</span><span class="p">[</span><span class="n">current_vertex</span><span class="p">]:</span>
                <span class="k">continue</span>
                
            <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">current_vertex</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">metric</span> <span class="o">==</span> <span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">:</span>
                    <span class="n">edge_weight</span> <span class="o">=</span> <span class="n">neighbor</span><span class="p">[</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">edge_weight</span> <span class="o">=</span> <span class="n">neighbor</span><span class="p">[</span><span class="sh">'</span><span class="s">metrics</span><span class="sh">'</span><span class="p">].</span><span class="nf">get</span><span class="p">(</span><span class="n">metric</span><span class="p">,</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">))</span>
                    
                <span class="n">distance</span> <span class="o">=</span> <span class="n">current_distance</span> <span class="o">+</span> <span class="n">edge_weight</span>
                
                <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">distances</span><span class="p">[</span><span class="n">neighbor</span><span class="p">[</span><span class="sh">'</span><span class="s">vertex</span><span class="sh">'</span><span class="p">]]:</span>
                    <span class="n">distances</span><span class="p">[</span><span class="n">neighbor</span><span class="p">[</span><span class="sh">'</span><span class="s">vertex</span><span class="sh">'</span><span class="p">]]</span> <span class="o">=</span> <span class="n">distance</span>
                    <span class="n">predecessors</span><span class="p">[</span><span class="n">neighbor</span><span class="p">[</span><span class="sh">'</span><span class="s">vertex</span><span class="sh">'</span><span class="p">]]</span> <span class="o">=</span> <span class="n">current_vertex</span>
                    <span class="n">heapq</span><span class="p">.</span><span class="nf">heappush</span><span class="p">(</span><span class="n">pq</span><span class="p">,</span> <span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">neighbor</span><span class="p">[</span><span class="sh">'</span><span class="s">vertex</span><span class="sh">'</span><span class="p">]))</span>
                    
        <span class="k">return</span> <span class="n">distances</span><span class="p">,</span> <span class="n">predecessors</span>
    
    <span class="k">def</span> <span class="nf">k_shortest_paths</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Yen</span><span class="sh">'</span><span class="s">s algorithm for k-shortest paths</span><span class="sh">"""</span>
        <span class="c1"># First shortest path
</span>        <span class="n">distances</span><span class="p">,</span> <span class="n">predecessors</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">dijkstra_multi_metric</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">distances</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">==</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">infinity</span><span class="sh">'</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[]</span>
            
        <span class="c1"># Reconstruct first path
</span>        <span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="nf">_reconstruct_path</span><span class="p">(</span><span class="n">predecessors</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">)]</span>
        <span class="n">B</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">k_iter</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">k_iter</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">spur_node</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">k_iter</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                <span class="n">root_path</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">k_iter</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                
                <span class="c1"># Remove edges used in previous paths
</span>                <span class="n">removed_edges</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">A</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span> <span class="ow">and</span> <span class="n">path</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">root_path</span><span class="p">:</span>
                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                        <span class="c1"># Temporarily remove edge
</span>                        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">edge</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">u</span><span class="p">]):</span>
                            <span class="k">if</span> <span class="n">edge</span><span class="p">[</span><span class="sh">'</span><span class="s">vertex</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
                                <span class="n">removed_edges</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">u</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">edge</span><span class="p">))</span>
                                
                <span class="c1"># Find spur path
</span>                <span class="n">spur_distances</span><span class="p">,</span> <span class="n">spur_pred</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">dijkstra_multi_metric</span><span class="p">(</span><span class="n">spur_node</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">spur_distances</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">infinity</span><span class="sh">'</span><span class="p">):</span>
                    <span class="n">spur_path</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">_reconstruct_path</span><span class="p">(</span><span class="n">spur_pred</span><span class="p">,</span> <span class="n">spur_node</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
                    <span class="n">total_path</span> <span class="o">=</span> <span class="n">root_path</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">spur_path</span>
                    
                    <span class="k">if</span> <span class="n">total_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">B</span><span class="p">:</span>
                        <span class="n">B</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">total_path</span><span class="p">)</span>
                        
                <span class="c1"># Restore edges
</span>                <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">removed_edges</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">u</span><span class="p">].</span><span class="nf">insert</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">edge</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="ow">not</span> <span class="n">B</span><span class="p">:</span>
                <span class="k">break</span>
                
            <span class="c1"># Sort B by path cost
</span>            <span class="n">B</span><span class="p">.</span><span class="nf">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="nf">_path_cost</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
            <span class="n">A</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">B</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            
        <span class="k">return</span> <span class="n">A</span>
</code></pre></div></div>

<h3 id="beyond-shortest-paths-network-capacity">Beyond Shortest Paths: Network Capacity</h3>

<p>Finding the shortest path is only part of the story. We also need to consider capacity—how much traffic can flow through the network. This is like planning routes for delivery trucks: the shortest path might be a narrow street that can’t handle many vehicles.</p>

<h4 id="calculating-maximum-network-capacity">Calculating Maximum Network Capacity</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MaxFlow</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Ford-Fulkerson with Edmonds-Karp implementation</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
        <span class="n">self</span><span class="p">.</span><span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">bfs</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">sink</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">BFS to find augmenting path</span><span class="sh">"""</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="p">[</span><span class="bp">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">n</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">source</span><span class="p">]</span>
        <span class="n">visited</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        
        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="ow">and</span> <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">visited</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="n">parent</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">u</span>
                    <span class="n">queue</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    
                    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">sink</span><span class="p">:</span>
                        <span class="k">return</span> <span class="bp">True</span>
                        
        <span class="k">return</span> <span class="bp">False</span>
    
    <span class="k">def</span> <span class="nf">max_flow</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">sink</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Find maximum flow from source to sink</span><span class="sh">"""</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">n</span>
        <span class="n">max_flow_value</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Create residual graph
</span>        <span class="n">residual</span> <span class="o">=</span> <span class="p">[[</span><span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">n</span><span class="p">)]</span> 
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">n</span><span class="p">)]</span>
        
        <span class="k">while</span> <span class="n">self</span><span class="p">.</span><span class="nf">bfs</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">sink</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
            <span class="c1"># Find minimum residual capacity
</span>            <span class="n">path_flow</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">sink</span>
            
            <span class="k">while</span> <span class="n">s</span> <span class="o">!=</span> <span class="n">source</span><span class="p">:</span>
                <span class="n">path_flow</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">path_flow</span><span class="p">,</span> <span class="n">residual</span><span class="p">[</span><span class="n">parent</span><span class="p">[</span><span class="n">s</span><span class="p">]][</span><span class="n">s</span><span class="p">])</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
                
            <span class="c1"># Update residual capacities
</span>            <span class="n">v</span> <span class="o">=</span> <span class="n">sink</span>
            <span class="k">while</span> <span class="n">v</span> <span class="o">!=</span> <span class="n">source</span><span class="p">:</span>
                <span class="n">u</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
                <span class="n">residual</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">-=</span> <span class="n">path_flow</span>
                <span class="n">residual</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">u</span><span class="p">]</span> <span class="o">+=</span> <span class="n">path_flow</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">parent</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
                
            <span class="n">max_flow_value</span> <span class="o">+=</span> <span class="n">path_flow</span>
            
        <span class="k">return</span> <span class="n">max_flow_value</span><span class="p">,</span> <span class="n">residual</span>
    
    <span class="k">def</span> <span class="nf">min_cut</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">residual</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Find minimum cut after max flow</span><span class="sh">"""</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="p">[</span><span class="bp">False</span><span class="p">]</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">n</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">source</span><span class="p">]</span>
        <span class="n">visited</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        
        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="ow">and</span> <span class="n">residual</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">visited</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="n">queue</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    
        <span class="c1"># Find edges in cut
</span>        <span class="n">cut_edges</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">n</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">visited</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">visited</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">and</span> <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">cut_edges</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">graph</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span>
                    
        <span class="k">return</span> <span class="n">cut_edges</span>
</code></pre></div></div>

<h2 id="building-networks-layer-by-layer">Building Networks Layer by Layer</h2>

<p>Now that we understand performance and routing, let’s see how networks are actually constructed. The OSI model breaks networking into seven layers, each solving specific problems. Think of it like building a house: you need a foundation before walls, and walls before a roof.</p>

<h3 id="the-osi-model-from-bits-to-applications">The OSI Model: From Bits to Applications</h3>

<p>Each layer provides services to the layer above while hiding complex details. This separation allows innovation at each layer without breaking the others—it’s why you can use the same web browser whether you’re on Wi-Fi or cellular.</p>

<h3 id="layer-7-application---what-users-see">Layer 7: Application - What Users See</h3>
<p>This is where networking meets user needs. Application layer protocols define how programs communicate over the network.</p>

<p><strong>Common protocols you use daily:</strong></p>
<ul>
  <li><strong>HTTP/HTTPS</strong>: Web browsing (the S means secure/encrypted)</li>
  <li><strong>SMTP/IMAP</strong>: Email sending and receiving</li>
  <li><strong>SSH</strong>: Secure remote access to servers</li>
  <li><strong>FTP/SFTP</strong>: File transfers</li>
  <li><strong>DNS</strong>: Converting domain names to IP addresses</li>
</ul>

<p><strong>Why it matters:</strong> Each protocol is optimized for its specific use case. Email needs reliability but can tolerate delays. Video calls need low latency but can tolerate some loss.</p>

<h3 id="layer-6-presentation---making-data-universal">Layer 6: Presentation - Making Data Universal</h3>
<p>Different computers represent data differently. The presentation layer ensures everyone speaks the same language.</p>

<p><strong>Key functions:</strong></p>
<ul>
  <li><strong>Encryption/Decryption</strong>: SSL/TLS keeps your data private</li>
  <li><strong>Compression</strong>: Making files smaller for faster transfer</li>
  <li><strong>Character encoding</strong>: Ensuring emojis work everywhere (UTF-8)</li>
  <li><strong>File formats</strong>: JPEG for photos, MP3 for audio</li>
</ul>

<p><strong>Real-world impact:</strong> This layer is why you can send a photo from an iPhone to an Android, or why secure websites work regardless of your browser.</p>

<h3 id="layer-5-session---managing-conversations">Layer 5: Session - Managing Conversations</h3>
<p>The session layer coordinates communication between applications, like a moderator in a conference call.</p>

<p><strong>Key responsibilities:</strong></p>
<ul>
  <li>Establishing and terminating sessions</li>
  <li>Managing turn-taking in communications</li>
  <li>Checkpointing long operations</li>
  <li>Examples: SQL sessions, RPC calls, NetBIOS</li>
</ul>

<h3 id="layer-4-transport---reliable-communication">Layer 4: Transport - Reliable Communication</h3>
<p>IP gets packets to the right computer, but which application should receive them? And what if packets arrive out of order or get lost? Layer 4 solves these problems.</p>

<p><strong>Two approaches:</strong></p>
<ul>
  <li><strong>TCP</strong>: Guarantees delivery and order (like certified mail)
    <ul>
      <li>Used for: Web pages, email, file transfers</li>
      <li>Overhead: Connection setup, acknowledgments, retransmissions</li>
    </ul>
  </li>
  <li><strong>UDP</strong>: Fast but unreliable (like regular mail)
    <ul>
      <li>Used for: Video streaming, gaming, DNS</li>
      <li>Advantage: Lower latency, no connection overhead</li>
    </ul>
  </li>
</ul>

<p><strong>Port numbers:</strong> Like apartment numbers in a building—they direct traffic to specific applications (web servers on port 80, SSH on port 22).</p>

<h3 id="layer-3-network---internet-scale-routing">Layer 3: Network - Internet-Scale Routing</h3>
<p>Layer 2 works great locally, but MAC addresses don’t scale to the internet. Layer 3 introduces IP addresses and routing—the technologies that make the global internet possible.</p>

<p><strong>Key innovations:</strong></p>
<ul>
  <li>IP addresses: Hierarchical addressing (like 192.168.1.1)</li>
  <li>Routers: Devices that forward packets between networks</li>
  <li>Routing protocols: Algorithms for finding paths (OSPF for organizations, BGP for the internet)</li>
  <li>ICMP: Network diagnostics (ping, traceroute)</li>
</ul>

<p><strong>The magic:</strong> Your packet finds its way across dozens of independent networks, each making local routing decisions, yet somehow arrives at the right destination.</p>

<h3 id="layer-2-data-link---reliable-local-delivery">Layer 2: Data Link - Reliable Local Delivery</h3>
<p>The physical layer gives us raw bit transmission, but it’s prone to errors. Layer 2 adds error detection and manages access when multiple devices share the same physical medium (like Wi-Fi).</p>

<p><strong>Key concepts:</strong></p>
<ul>
  <li>MAC addresses: Hardware identifiers (like 00:1B:44:11:3A:B7)</li>
  <li>Ethernet frames: Packets with error-checking</li>
  <li>Switches: Smart devices that learn where to send frames</li>
  <li>ARP: Translating IP addresses to MAC addresses</li>
</ul>

<p><strong>Why it matters:</strong> Without Layer 2, your Wi-Fi would be chaos with devices talking over each other, and corrupted data would crash applications.</p>

<h3 id="layer-1-physical---getting-bits-from-a-to-b">Layer 1: Physical - Getting Bits from A to B</h3>
<p>This is where networking meets physics. Whether using electrical signals in copper cables, light pulses in fiber optics, or radio waves in Wi-Fi, we need to reliably transmit ones and zeros.</p>

<p><strong>Real-world challenges:</strong></p>
<ul>
  <li>Signal degradation over distance</li>
  <li>Interference from other devices</li>
  <li>Physical damage to cables</li>
</ul>

<p><strong>Technologies:</strong></p>
<ul>
  <li>Ethernet cables (Cat5e, Cat6)</li>
  <li>Fiber optics (single-mode, multi-mode)</li>
  <li>Wireless (Wi-Fi, cellular)</li>
</ul>

<h2 id="the-tcpip-model-what-we-actually-use">The TCP/IP Model: What We Actually Use</h2>

<p>While OSI provides a conceptual framework, the internet actually runs on the simpler TCP/IP model. It combines some OSI layers and focuses on practical implementation:</p>

<ol>
  <li><strong>Application Layer</strong>: Everything from OSI layers 5-7</li>
  <li><strong>Transport Layer</strong>: TCP and UDP (OSI layer 4)</li>
  <li><strong>Internet Layer</strong>: IP routing (OSI layer 3)</li>
  <li><strong>Link Layer</strong>: Physical transmission and local delivery (OSI layers 1-2)</li>
</ol>

<p>This streamlined model reflects how protocols are actually implemented and is what you’ll encounter in practice.</p>

<h2 id="ip-addressing-the-internets-phone-book">IP Addressing: The Internet’s Phone Book</h2>

<p>Just as phone numbers let you call anyone in the world, IP addresses enable global internet communication. Let’s understand how this addressing system works and why we’re running out of numbers.</p>

<h3 id="ipv4-the-original-design">IPv4: The Original Design</h3>
<p>IPv4 uses 32-bit addresses, giving us about 4.3 billion possible addresses. In 1981, this seemed like plenty. Today, with billions of devices online, we’ve had to get creative.</p>

<p><strong>Address Classes</strong>:</p>
<ul>
  <li>Class A: 1.0.0.0 to 126.255.255.255 (/8)</li>
  <li>Class B: 128.0.0.0 to 191.255.255.255 (/16)</li>
  <li>Class C: 192.0.0.0 to 223.255.255.255 (/24)</li>
</ul>

<p><strong>Private Address Ranges</strong>:</p>
<ul>
  <li>10.0.0.0/8</li>
  <li>172.16.0.0/12</li>
  <li>192.168.0.0/16</li>
</ul>

<h3 id="ipv6">IPv6</h3>
<p>128-bit addresses, written in hexadecimal (e.g., 2001:db8::1)</p>

<p><strong>Address Types</strong>:</p>
<ul>
  <li>Unicast: Single interface</li>
  <li>Multicast: Group of interfaces</li>
  <li>Anycast: Nearest of group</li>
</ul>

<p><strong>Special Addresses</strong>:</p>
<ul>
  <li>::1 - Loopback</li>
  <li>fe80::/10 - Link-local</li>
  <li>2000::/3 - Global unicast</li>
</ul>

<h3 id="subnetting-organizing-ip-addresses">Subnetting: Organizing IP Addresses</h3>

<p>Subnetting is like dividing a large office building into departments. Instead of one giant network, we create smaller, manageable segments. This improves security, reduces broadcast traffic, and makes networks easier to manage.</p>

<p><strong>Understanding CIDR Notation</strong>
When we write 192.168.1.0/24, we’re defining:</p>
<ul>
  <li><strong>Network portion</strong>: First 24 bits (192.168.1)</li>
  <li><strong>Host portion</strong>: Last 8 bits (0-255)</li>
  <li><strong>Network address</strong>: 192.168.1.0 (identifies the subnet)</li>
  <li><strong>Broadcast address</strong>: 192.168.1.255 (reaches all hosts)</li>
  <li><strong>Usable addresses</strong>: 192.168.1.1 to 192.168.1.254 (254 hosts)</li>
</ul>

<p><strong>Why subtract 2?</strong> The network and broadcast addresses are reserved, so a /24 network has 256 total addresses but only 254 usable ones.</p>

<p><strong>Real-world example</strong>: A company might use:</p>
<ul>
  <li>10.0.1.0/24 for engineering (254 devices)</li>
  <li>10.0.2.0/24 for sales</li>
  <li>10.0.3.0/24 for guest Wi-Fi</li>
</ul>

<p>This separation means a broadcast on the guest network won’t affect engineering workstations.</p>

<h2 id="deep-dive-how-tcp-controls-the-internets-speed">Deep Dive: How TCP Controls the Internet’s Speed</h2>

<p>We’ve covered the basics of TCP, but its real genius lies in congestion control. Without it, the internet would collapse under its own traffic. Let’s explore how TCP automatically adjusts sending rates to match network capacity.</p>

<h3 id="the-congestion-control-challenge">The Congestion Control Challenge</h3>

<p>Imagine driving on a highway without speed limits or traffic reports. How fast should you go? Too slow wastes time; too fast causes accidents. TCP faces this same dilemma billions of times per second.</p>

<h4 id="tcp-reno-the-classic-algorithm">TCP Reno: The Classic Algorithm</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TCPReno</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">TCP Reno congestion control algorithm</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">mss</span><span class="o">=</span><span class="mi">1460</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">mss</span> <span class="o">=</span> <span class="n">mss</span>  <span class="c1"># Maximum Segment Size
</span>        <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">mss</span>  <span class="c1"># Congestion window
</span>        <span class="n">self</span><span class="p">.</span><span class="n">ssthresh</span> <span class="o">=</span> <span class="mi">64</span> <span class="o">*</span> <span class="mi">1024</span>  <span class="c1"># Slow start threshold
</span>        <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="sh">'</span><span class="s">slow_start</span><span class="sh">'</span>
        <span class="n">self</span><span class="p">.</span><span class="n">dup_ack_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">rtt_samples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># Smoothed RTT
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rttvar</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># RTT variance
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rto</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># Retransmission timeout
</span>        
    <span class="k">def</span> <span class="nf">on_ack</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">ack_num</span><span class="p">,</span> <span class="n">is_duplicate</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Handle ACK reception</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">is_duplicate</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">dup_ack_count</span> <span class="o">+=</span> <span class="mi">1</span>
            
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">dup_ack_count</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="c1"># Fast retransmit/recovery
</span>                <span class="n">self</span><span class="p">.</span><span class="n">ssthresh</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span><span class="p">)</span>
                <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">ssthresh</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span>
                <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="sh">'</span><span class="s">fast_recovery</span><span class="sh">'</span>
                <span class="k">return</span> <span class="sh">'</span><span class="s">fast_retransmit</span><span class="sh">'</span>
                
            <span class="k">elif</span> <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">==</span> <span class="sh">'</span><span class="s">fast_recovery</span><span class="sh">'</span><span class="p">:</span>
                <span class="c1"># Inflate window
</span>                <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">+=</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span>
                
        <span class="k">else</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">dup_ack_count</span> <span class="o">=</span> <span class="mi">0</span>
            
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">==</span> <span class="sh">'</span><span class="s">slow_start</span><span class="sh">'</span><span class="p">:</span>
                <span class="c1"># Exponential increase
</span>                <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">+=</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span>
                
                <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">&gt;=</span> <span class="n">self</span><span class="p">.</span><span class="n">ssthresh</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="sh">'</span><span class="s">congestion_avoidance</span><span class="sh">'</span>
                    
            <span class="k">elif</span> <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">==</span> <span class="sh">'</span><span class="s">congestion_avoidance</span><span class="sh">'</span><span class="p">:</span>
                <span class="c1"># Additive increase
</span>                <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">+=</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">mss</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span><span class="p">)</span> <span class="o">/</span> <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span>
                
            <span class="k">elif</span> <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">==</span> <span class="sh">'</span><span class="s">fast_recovery</span><span class="sh">'</span><span class="p">:</span>
                <span class="c1"># Exit fast recovery
</span>                <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">ssthresh</span>
                <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="sh">'</span><span class="s">congestion_avoidance</span><span class="sh">'</span>
                
        <span class="k">return</span> <span class="bp">None</span>
    
    <span class="k">def</span> <span class="nf">on_timeout</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Handle retransmission timeout</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">ssthresh</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span>
        <span class="n">self</span><span class="p">.</span><span class="n">state</span> <span class="o">=</span> <span class="sh">'</span><span class="s">slow_start</span><span class="sh">'</span>
        <span class="n">self</span><span class="p">.</span><span class="n">dup_ack_count</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="c1"># Back off RTO
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rto</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">rto</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">update_rtt</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">measured_rtt</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Update RTT estimates (RFC 6298)</span><span class="sh">"""</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.125</span>
        <span class="n">beta</span> <span class="o">=</span> <span class="mf">0.25</span>
        <span class="n">K</span> <span class="o">=</span> <span class="mi">4</span>
        
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># First measurement
</span>            <span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="o">=</span> <span class="n">measured_rtt</span>
            <span class="n">self</span><span class="p">.</span><span class="n">rttvar</span> <span class="o">=</span> <span class="n">measured_rtt</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Update estimates
</span>            <span class="n">self</span><span class="p">.</span><span class="n">rttvar</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">beta</span><span class="p">)</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">rttvar</span> <span class="o">+</span> <span class="n">beta</span> <span class="o">*</span> <span class="nf">abs</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="o">-</span> <span class="n">measured_rtt</span><span class="p">)</span>
            <span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">measured_rtt</span>
            
        <span class="c1"># Calculate RTO
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rto</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">srtt</span> <span class="o">+</span> <span class="n">K</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">rttvar</span>
        <span class="n">self</span><span class="p">.</span><span class="n">rto</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">rto</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># Minimum 1 second
</span></code></pre></div></div>

<h4 id="tcp-bbr-googles-game-changer">TCP BBR: Google’s Game-Changer</h4>

<p>Traditional algorithms like Reno react to packet loss, but what if we could measure the actual capacity? BBR (Bottleneck Bandwidth and RTT) does exactly that, leading to faster downloads and smoother video streaming.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TCPBBR</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">BBR measures the network</span><span class="sh">'</span><span class="s">s actual capacity instead of guessing.
    
    Key insight: The optimal sending rate equals the bottleneck bandwidth,
    and the optimal amount of data in flight equals bandwidth × RTT.
    </span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="sh">'</span><span class="s">startup</span><span class="sh">'</span>
        <span class="n">self</span><span class="p">.</span><span class="n">pacing_rate</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">min_rtt</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">min_rtt_stamp</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">self</span><span class="p">.</span><span class="n">btl_bw</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Bottleneck bandwidth
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rtprop</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Min RTT
</span>        <span class="n">self</span><span class="p">.</span><span class="n">bandwidth_samples</span> <span class="o">=</span> <span class="p">[]</span>
        
    <span class="k">def</span> <span class="nf">update_model</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">delivered</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">rtt</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Update bandwidth and RTT model</span><span class="sh">"""</span>
        <span class="c1"># Update bandwidth estimate
</span>        <span class="k">if</span> <span class="n">interval</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bandwidth</span> <span class="o">=</span> <span class="n">delivered</span> <span class="o">/</span> <span class="n">interval</span>
            <span class="n">self</span><span class="p">.</span><span class="n">bandwidth_samples</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">bandwidth</span><span class="p">)</span>
            
            <span class="c1"># Use windowed max filter
</span>            <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">bandwidth_samples</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">bandwidth_samples</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                
            <span class="n">self</span><span class="p">.</span><span class="n">btl_bw</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">bandwidth_samples</span><span class="p">)</span>
            
        <span class="c1"># Update RTT estimate
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rtprop</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">rtprop</span><span class="p">,</span> <span class="n">rtt</span><span class="p">)</span> <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">rtprop</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">rtt</span>
        
    <span class="k">def</span> <span class="nf">calculate_pacing_rate</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Calculate pacing rate based on model</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">==</span> <span class="sh">'</span><span class="s">startup</span><span class="sh">'</span><span class="p">:</span>
            <span class="c1"># High gain to quickly discover bandwidth
</span>            <span class="n">pacing_gain</span> <span class="o">=</span> <span class="mf">2.89</span>  <span class="c1"># 2/ln(2)
</span>        <span class="k">elif</span> <span class="n">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">==</span> <span class="sh">'</span><span class="s">drain</span><span class="sh">'</span><span class="p">:</span>
            <span class="c1"># Drain queue built during startup
</span>            <span class="n">pacing_gain</span> <span class="o">=</span> <span class="mf">0.35</span>  <span class="c1"># 1/2.89
</span>        <span class="k">elif</span> <span class="n">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">==</span> <span class="sh">'</span><span class="s">probe_bw</span><span class="sh">'</span><span class="p">:</span>
            <span class="c1"># Cycle through different gains
</span>            <span class="n">gains</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.25</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">pacing_gain</span> <span class="o">=</span> <span class="n">gains</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">cycle_index</span> <span class="o">%</span> <span class="nf">len</span><span class="p">(</span><span class="n">gains</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># probe_rtt
</span>            <span class="n">pacing_gain</span> <span class="o">=</span> <span class="mi">1</span>
            
        <span class="n">self</span><span class="p">.</span><span class="n">pacing_rate</span> <span class="o">=</span> <span class="n">pacing_gain</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">btl_bw</span>
        
    <span class="k">def</span> <span class="nf">update_cwnd</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Update congestion window</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">==</span> <span class="sh">'</span><span class="s">probe_rtt</span><span class="sh">'</span><span class="p">:</span>
            <span class="c1"># Minimal cwnd to measure RTT
</span>            <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># BDP + headroom for probing
</span>            <span class="n">bdp</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">btl_bw</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">rtprop</span>
            <span class="n">self</span><span class="p">.</span><span class="n">cwnd</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">bdp</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">cwnd_gain</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">mss</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="how-the-internet-routes-traffic-advanced-protocols">How the Internet Routes Traffic: Advanced Protocols</h2>

<p>We’ve seen how routers find paths within a network. But how does traffic flow between the 70,000+ independent networks that form the internet? This is where BGP comes in—the protocol that literally holds the internet together.</p>

<h3 id="bgp-the-internets-routing-protocol">BGP: The Internet’s Routing Protocol</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BGPRouter</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Simplified BGP implementation</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">as_number</span><span class="p">,</span> <span class="n">router_id</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">as_number</span> <span class="o">=</span> <span class="n">as_number</span>
        <span class="n">self</span><span class="p">.</span><span class="n">router_id</span> <span class="o">=</span> <span class="n">router_id</span>
        <span class="n">self</span><span class="p">.</span><span class="n">peers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">rib_in</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Received routes
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rib_loc</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Local routes
</span>        <span class="n">self</span><span class="p">.</span><span class="n">rib_out</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Advertised routes
</span>        <span class="n">self</span><span class="p">.</span><span class="n">best_paths</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Best path selection
</span>        
    <span class="k">def</span> <span class="nf">add_peer</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">peer_ip</span><span class="p">,</span> <span class="n">peer_as</span><span class="p">,</span> <span class="n">peer_type</span><span class="o">=</span><span class="sh">'</span><span class="s">ebgp</span><span class="sh">'</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Add BGP peer</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">peers</span><span class="p">[</span><span class="n">peer_ip</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">as_number</span><span class="sh">'</span><span class="p">:</span> <span class="n">peer_as</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="n">peer_type</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">state</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">idle</span><span class="sh">'</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">hold_timer</span><span class="sh">'</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">keepalive_timer</span><span class="sh">'</span><span class="p">:</span> <span class="mi">30</span>
        <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">process_update</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">peer_ip</span><span class="p">,</span> <span class="n">nlri</span><span class="p">,</span> <span class="n">attributes</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Process BGP UPDATE message</span><span class="sh">"""</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">nlri</span><span class="p">:</span>
            <span class="n">route_key</span> <span class="o">=</span> <span class="p">(</span><span class="n">peer_ip</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
            
            <span class="c1"># Store in RIB-In
</span>            <span class="n">self</span><span class="p">.</span><span class="n">rib_in</span><span class="p">[</span><span class="n">route_key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="sh">'</span><span class="s">prefix</span><span class="sh">'</span><span class="p">:</span> <span class="n">prefix</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">peer</span><span class="sh">'</span><span class="p">:</span> <span class="n">peer_ip</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">attributes</span><span class="sh">'</span><span class="p">:</span> <span class="n">attributes</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">:</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
            <span class="p">}</span>
            
        <span class="c1"># Run best path selection
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">best_path_selection</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">best_path_selection</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">BGP best path selection algorithm</span><span class="sh">"""</span>
        <span class="n">prefix_routes</span> <span class="o">=</span> <span class="nf">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        
        <span class="c1"># Group routes by prefix
</span>        <span class="nf">for </span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">prefix</span><span class="p">),</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">rib_in</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
            <span class="n">prefix_routes</span><span class="p">[</span><span class="n">prefix</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
            
        <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">routes</span> <span class="ow">in</span> <span class="n">prefix_routes</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
            <span class="c1"># Apply BGP decision process
</span>            <span class="n">best_route</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">select_best_route</span><span class="p">(</span><span class="n">routes</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">best_route</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">best_paths</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_route</span>
                
                <span class="c1"># Install in RIB-Loc if best
</span>                <span class="n">self</span><span class="p">.</span><span class="n">rib_loc</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_route</span>
                
                <span class="c1"># Advertise to other peers
</span>                <span class="n">self</span><span class="p">.</span><span class="nf">advertise_route</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">best_route</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">select_best_route</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">routes</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Apply BGP decision criteria</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">routes</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
            
        <span class="c1"># Sort by BGP decision criteria
</span>        <span class="k">def</span> <span class="nf">route_preference</span><span class="p">(</span><span class="n">route</span><span class="p">):</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="n">route</span><span class="p">[</span><span class="sh">'</span><span class="s">attributes</span><span class="sh">'</span><span class="p">]</span>
            <span class="nf">return </span><span class="p">(</span>
                <span class="o">-</span><span class="n">attrs</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">local_pref</span><span class="sh">'</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>  <span class="c1"># Higher is better
</span>                <span class="nf">len</span><span class="p">(</span><span class="n">attrs</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">as_path</span><span class="sh">'</span><span class="p">,</span> <span class="p">[])),</span>   <span class="c1"># Shorter is better
</span>                <span class="n">attrs</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">origin</span><span class="sh">'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>          <span class="c1"># Lower is better (IGP &lt; EGP &lt; Incomplete)
</span>                <span class="n">attrs</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">med</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>             <span class="c1"># Lower is better
</span>                <span class="n">self</span><span class="p">.</span><span class="n">peers</span><span class="p">[</span><span class="n">route</span><span class="p">[</span><span class="sh">'</span><span class="s">peer</span><span class="sh">'</span><span class="p">]][</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">ebgp</span><span class="sh">'</span><span class="p">,</span>  <span class="c1"># Prefer eBGP
</span>                <span class="n">attrs</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">next_hop</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">),</span>       <span class="c1"># Lower IP is better
</span>                <span class="n">route</span><span class="p">[</span><span class="sh">'</span><span class="s">peer</span><span class="sh">'</span><span class="p">]</span>                    <span class="c1"># Lower peer IP is better
</span>            <span class="p">)</span>
            
        <span class="k">return</span> <span class="nf">min</span><span class="p">(</span><span class="n">routes</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">route_preference</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="ospf-smart-routing-within-organizations">OSPF: Smart Routing Within Organizations</h3>

<p>While BGP connects different organizations, OSPF (Open Shortest Path First) optimizes routing within a single organization. It’s like having a real-time traffic map for your corporate network.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">OSPFRouter</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">OSPF builds a complete map of the network for optimal routing.
    
    Unlike distance-vector protocols that only know their neighbors,
    OSPF routers share their complete view, enabling better decisions.
    </span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">router_id</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">router_id</span> <span class="o">=</span> <span class="n">router_id</span>
        <span class="n">self</span><span class="p">.</span><span class="n">lsdb</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Link State Database
</span>        <span class="n">self</span><span class="p">.</span><span class="n">neighbors</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">interfaces</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">routing_table</span> <span class="o">=</span> <span class="p">{}</span>
        
    <span class="k">def</span> <span class="nf">generate_lsa</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Generate Router LSA</span><span class="sh">"""</span>
        <span class="n">lsa</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Router LSA
</span>            <span class="sh">'</span><span class="s">router_id</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">router_id</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">sequence</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_next_sequence</span><span class="p">(),</span>
            <span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">links</span><span class="sh">'</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
        
        <span class="k">for</span> <span class="n">intf_id</span><span class="p">,</span> <span class="n">intf</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">interfaces</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
            <span class="n">link</span> <span class="o">=</span> <span class="p">{</span>
                <span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="n">intf</span><span class="p">[</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">],</span>  <span class="c1"># p2p, transit, stub
</span>                <span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">:</span> <span class="n">intf</span><span class="p">[</span><span class="sh">'</span><span class="s">neighbor_id</span><span class="sh">'</span><span class="p">]</span> <span class="k">if</span> <span class="n">intf</span><span class="p">[</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">p2p</span><span class="sh">'</span> <span class="k">else</span> <span class="n">intf_id</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">:</span> <span class="n">intf</span><span class="p">[</span><span class="sh">'</span><span class="s">ip_address</span><span class="sh">'</span><span class="p">],</span>
                <span class="sh">'</span><span class="s">metric</span><span class="sh">'</span><span class="p">:</span> <span class="n">intf</span><span class="p">[</span><span class="sh">'</span><span class="s">cost</span><span class="sh">'</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="n">lsa</span><span class="p">[</span><span class="sh">'</span><span class="s">links</span><span class="sh">'</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">lsa</span>
    
    <span class="k">def</span> <span class="nf">dijkstra_spf</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Calculate shortest paths using Dijkstra</span><span class="sh">"""</span>
        <span class="c1"># Build graph from LSDB
</span>        <span class="n">graph</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">build_topology_graph</span><span class="p">()</span>
        
        <span class="c1"># Initialize
</span>        <span class="n">distances</span> <span class="o">=</span> <span class="p">{</span><span class="n">node</span><span class="p">:</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">graph</span><span class="p">}</span>
        <span class="n">distances</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">router_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">predecessors</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">unvisited</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span><span class="n">graph</span><span class="p">.</span><span class="nf">keys</span><span class="p">())</span>
        
        <span class="k">while</span> <span class="n">unvisited</span><span class="p">:</span>
            <span class="c1"># Find minimum distance node
</span>            <span class="n">current</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">unvisited</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
            <span class="n">unvisited</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">distances</span><span class="p">[</span><span class="n">current</span><span class="p">]</span> <span class="o">==</span> <span class="nf">float</span><span class="p">(</span><span class="sh">'</span><span class="s">inf</span><span class="sh">'</span><span class="p">):</span>
                <span class="k">break</span>
                
            <span class="c1"># Update neighbors
</span>            <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">cost</span> <span class="ow">in</span> <span class="n">graph</span><span class="p">[</span><span class="n">current</span><span class="p">].</span><span class="nf">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="n">unvisited</span><span class="p">:</span>
                    <span class="n">alt_distance</span> <span class="o">=</span> <span class="n">distances</span><span class="p">[</span><span class="n">current</span><span class="p">]</span> <span class="o">+</span> <span class="n">cost</span>
                    
                    <span class="k">if</span> <span class="n">alt_distance</span> <span class="o">&lt;</span> <span class="n">distances</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]:</span>
                        <span class="n">distances</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span> <span class="o">=</span> <span class="n">alt_distance</span>
                        <span class="n">predecessors</span><span class="p">[</span><span class="n">neighbor</span><span class="p">]</span> <span class="o">=</span> <span class="n">current</span>
                        
        <span class="c1"># Build routing table
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">build_routing_table</span><span class="p">(</span><span class="n">distances</span><span class="p">,</span> <span class="n">predecessors</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="choosing-the-right-transport-tcp-vs-udp">Choosing the Right Transport: TCP vs UDP</h2>

<p>One of the most important decisions in network programming is choosing between TCP and UDP. It’s not about which is “better”—each serves different needs.</p>

<h3 id="tcp-the-reliable-workhorse">TCP: The Reliable Workhorse</h3>
<p><strong>Think of TCP like certified mail with tracking:</strong></p>
<ul>
  <li>Connection-oriented</li>
  <li>Reliable delivery</li>
  <li>Ordered packets</li>
  <li>Flow control</li>
  <li>Congestion control</li>
</ul>

<p><strong>Three-way Handshake</strong>:</p>
<ol>
  <li>SYN →</li>
  <li>← SYN-ACK</li>
  <li>ACK →</li>
</ol>

<p><strong>Use Cases</strong>:</p>
<ul>
  <li>Web browsing (HTTP)</li>
  <li>Email (SMTP)</li>
  <li>File transfer (FTP)</li>
  <li>SSH</li>
</ul>

<h3 id="udp-the-speed-demon">UDP: The Speed Demon</h3>
<p><strong>Think of UDP like shouting across a room:</strong></p>
<ul>
  <li>No guarantee anyone heard you</li>
  <li>No confirmation of receipt</li>
  <li>But it’s fast and simple</li>
</ul>

<p><strong>Perfect for:</strong></p>
<ul>
  <li><strong>Live video/audio</strong>: Losing a frame is better than delay</li>
  <li><strong>Gaming</strong>: Old position updates become irrelevant</li>
  <li><strong>DNS</strong>: Queries are tiny and can be retried</li>
  <li><strong>IoT sensors</strong>: Broadcasting readings to whoever’s listening</li>
</ul>

<p><strong>The key insight</strong>: Sometimes “good enough” delivery beats perfect delivery, especially when data becomes stale quickly.</p>

<h2 id="protocols-in-action-how-the-internet-works">Protocols in Action: How the Internet Works</h2>

<p>Let’s explore the protocols you use every day, understanding not just what they do, but why they work the way they do.</p>

<h3 id="httphttps-the-webs-foundation">HTTP/HTTPS: The Web’s Foundation</h3>
<p>HTTP is how browsers talk to servers. HTTPS adds encryption, protecting your data from eavesdroppers.</p>

<p><strong>HTTP Methods</strong>:</p>
<ul>
  <li>GET: Retrieve resource</li>
  <li>POST: Submit data</li>
  <li>PUT: Update resource</li>
  <li>DELETE: Remove resource</li>
  <li>HEAD: Headers only</li>
  <li>OPTIONS: Available methods</li>
</ul>

<p><strong>Status Codes</strong>:</p>
<ul>
  <li>1xx: Informational</li>
  <li>2xx: Success (200 OK)</li>
  <li>3xx: Redirection (301 Moved)</li>
  <li>4xx: Client error (404 Not Found)</li>
  <li>5xx: Server error (500 Internal Error)</li>
</ul>

<h3 id="dns-the-internets-directory-service">DNS: The Internet’s Directory Service</h3>

<p>Typing “google.com” is much easier than remembering “142.250.80.46”. DNS makes this magic happen, but it’s more sophisticated than a simple phone book.</p>

<p><strong>How DNS queries work:</strong></p>
<ol>
  <li><strong>Your browser</strong> asks your local DNS resolver</li>
  <li><strong>Local resolver</strong> checks its cache</li>
  <li>If not cached, it asks the <strong>root servers</strong> (knows where .com lives)</li>
  <li><strong>TLD servers</strong> know where google.com’s servers are</li>
  <li><strong>Google’s DNS</strong> provides the actual IP address</li>
  <li>Result is cached at each step for speed</li>
</ol>

<p><strong>Common DNS record types:</strong></p>
<ul>
  <li>A: IPv4 address</li>
  <li>AAAA: IPv6 address</li>
  <li>CNAME: Canonical name (alias)</li>
  <li>MX: Mail exchange</li>
  <li>TXT: Text information</li>
  <li>NS: Name server</li>
  <li>SOA: Start of authority</li>
</ul>

<p><strong>DNS Query Process</strong>:</p>
<ol>
  <li>Check local cache</li>
  <li>Query recursive resolver</li>
  <li>Query root server</li>
  <li>Query TLD server</li>
  <li>Query authoritative server</li>
</ol>

<h3 id="dhcp-automatic-network-configuration">DHCP: Automatic Network Configuration</h3>

<p>When you connect to Wi-Fi, how does your device get an IP address? DHCP handles this automatically, saving network administrators from manually configuring thousands of devices.</p>

<p><strong>The DORA Dance:</strong></p>
<ol>
  <li><strong>Discover</strong>: “Hey, I’m new here! Any DHCP servers around?”</li>
  <li><strong>Offer</strong>: “Welcome! You can have 192.168.1.150”</li>
  <li><strong>Request</strong>: “Thanks! I’ll take that address”</li>
  <li><strong>Acknowledge</strong>: “It’s yours for the next 24 hours”</li>
</ol>

<p><strong>What else DHCP provides:</strong></p>
<ul>
  <li>Default gateway (your router’s address)</li>
  <li>DNS servers</li>
  <li>Subnet mask</li>
  <li>Lease time (when to renew)</li>
</ul>

<h3 id="ssh-secure-shell">SSH (Secure Shell)</h3>
<p>Encrypted remote access protocol.</p>

<p><strong>Key-based Authentication</strong>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Generate key pair</span>
ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096

<span class="c"># Copy public key to server</span>
ssh-copy-id user@server

<span class="c"># Connect using key</span>
ssh <span class="nt">-i</span> ~/.ssh/id_rsa user@server
</code></pre></div></div>

<h2 id="making-routing-decisions-from-simple-to-complex">Making Routing Decisions: From Simple to Complex</h2>

<p>Now that we understand addressing and protocols, let’s see how routers actually decide where to send packets.</p>

<h3 id="static-routing-manual-control">Static Routing: Manual Control</h3>
<p>Sometimes you know exactly where traffic should go. Static routes are like putting up permanent road signs.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Add route</span>
ip route add 10.0.0.0/8 via 192.168.1.1

<span class="c"># Delete route</span>
ip route del 10.0.0.0/8

<span class="c"># Show routing table</span>
ip route show
</code></pre></div></div>

<h3 id="dynamic-routing-networks-that-adapt">Dynamic Routing: Networks That Adapt</h3>

<p>Static routes work for small networks, but imagine manually updating routes for the entire internet! Dynamic protocols automatically discover paths and adapt to changes.</p>

<p><strong>Within Organizations (IGP):</strong></p>
<ul>
  <li><strong>RIP</strong>: Simple but limited (counts hops, max 15)
    <ul>
      <li>Good for: Small networks, lab environments</li>
      <li>Problem: Treats all links equally (1Gbps same as 10Mbps)</li>
    </ul>
  </li>
  <li><strong>OSPF</strong>: Smarter routing based on link speed
    <ul>
      <li>Good for: Large corporate networks</li>
      <li>Advantage: Considers bandwidth, builds complete network map</li>
    </ul>
  </li>
  <li><strong>EIGRP</strong>: Cisco’s enhanced protocol
    <ul>
      <li>Good for: Cisco-only environments</li>
      <li>Advantage: Fast convergence, multiple metrics</li>
    </ul>
  </li>
</ul>

<p><strong>Between Organizations (EGP):</strong></p>
<ul>
  <li><strong>BGP</strong>: The internet’s routing protocol
    <ul>
      <li>Exchanges routes between ISPs, companies, countries</li>
      <li>Makes policy decisions (prefer certain providers, avoid others)</li>
      <li>Handles 900,000+ routes in the global routing table</li>
    </ul>
  </li>
</ul>

<h3 id="nat-network-address-translation">NAT (Network Address Translation)</h3>
<p>Translates private IPs to public IPs.</p>

<p><strong>Types</strong>:</p>
<ul>
  <li>Static NAT: One-to-one mapping</li>
  <li>Dynamic NAT: Pool of public IPs</li>
  <li>PAT/Overload: Many-to-one using ports</li>
</ul>

<h2 id="vlans-virtual-networks-on-physical-hardware">VLANs: Virtual Networks on Physical Hardware</h2>

<p>Imagine you need separate networks for different departments, but running separate cables is expensive. VLANs create multiple logical networks on the same physical switches—like having multiple virtual highways on the same road.</p>

<p><strong>Benefits</strong>:</p>
<ul>
  <li>Security isolation</li>
  <li>Broadcast domain reduction</li>
  <li>Flexible network design</li>
  <li>QoS implementation</li>
</ul>

<p><strong>Configuration Example</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Create VLAN
vlan 10
 name Sales

# Assign port to VLAN
interface GigabitEthernet0/1
 switchport mode access
 switchport access vlan 10

# Configure trunk
interface GigabitEthernet0/24
 switchport mode trunk
 switchport trunk allowed vlan 10,20,30
</code></pre></div></div>

<h2 id="securing-networks-defense-in-depth">Securing Networks: Defense in Depth</h2>

<p>Every network connection is a potential security risk. Let’s explore how networks are protected at multiple layers.</p>

<h3 id="firewalls-the-networks-bouncer">Firewalls: The Network’s Bouncer</h3>
<p>Firewalls examine traffic and block anything suspicious, like a bouncer checking IDs at a club.</p>

<p><strong>Types</strong>:</p>
<ul>
  <li>Packet filtering</li>
  <li>Stateful inspection</li>
  <li>Application layer</li>
  <li>Next-generation (NGFW)</li>
</ul>

<h3 id="vpn-virtual-private-network">VPN (Virtual Private Network)</h3>
<p>Creates encrypted tunnels.</p>

<p><strong>Types</strong>:</p>
<ul>
  <li>Site-to-site</li>
  <li>Remote access</li>
  <li>SSL/TLS VPN</li>
  <li>IPSec</li>
</ul>

<h3 id="access-control-lists-acls">Access Control Lists (ACLs)</h3>
<p>Define permitted/denied traffic.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Cisco ACL example
access-list 100 permit tcp any host 192.168.1.10 eq 80
access-list 100 deny ip any any
</code></pre></div></div>

<h2 id="quality-of-service-managing-network-traffic">Quality of Service: Managing Network Traffic</h2>

<p>Not all traffic is equal. Would you rather have your video call drop or your background download slow down? QoS lets networks make these decisions intelligently.</p>

<h3 id="how-qos-works">How QoS Works</h3>
<ul>
  <li>Classification and marking</li>
  <li>Queuing</li>
  <li>Policing and shaping</li>
  <li>Congestion avoidance</li>
</ul>

<p><strong>Common QoS Models</strong>:</p>
<ul>
  <li>Best Effort</li>
  <li>IntServ (Integrated Services)</li>
  <li>DiffServ (Differentiated Services)</li>
</ul>

<h2 id="troubleshooting-networks-tools-and-techniques">Troubleshooting Networks: Tools and Techniques</h2>

<p>When networks fail, you need to diagnose problems quickly. Here are the essential tools every network engineer uses.</p>

<h3 id="essential-diagnostic-tools">Essential Diagnostic Tools</h3>

<p><strong>ping</strong>: Test connectivity</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ping <span class="nt">-c</span> 4 google.com
</code></pre></div></div>

<p><strong>traceroute</strong>: Show path to destination</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>traceroute google.com
</code></pre></div></div>

<p><strong>netstat</strong>: Display connections</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat <span class="nt">-tulpn</span>
</code></pre></div></div>

<p><strong>tcpdump</strong>: Capture packets</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tcpdump <span class="nt">-i</span> eth0 <span class="nt">-w</span> capture.pcap
</code></pre></div></div>

<p><strong>nmap</strong>: Network discovery</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sS</span> <span class="nt">-p</span> 1-1000 192.168.1.0/24
</code></pre></div></div>

<p><strong>dig</strong>: DNS lookup</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dig @8.8.8.8 example.com
</code></pre></div></div>

<h3 id="systematic-troubleshooting">Systematic Troubleshooting</h3>

<p><strong>When things don’t work, follow the OSI model from bottom to top:</strong></p>

<p><strong>Layer 1 - Physical</strong>: Is it plugged in?</p>
<ul>
  <li>Check cable connections</li>
  <li>Look for damaged cables</li>
  <li>Verify link lights on switches</li>
</ul>

<p><strong>Layer 2 - Data Link</strong>: Can you reach local devices?</p>
<ul>
  <li>Ping your default gateway</li>
  <li>Check ARP cache (<code class="language-plaintext highlighter-rouge">arp -a</code>)</li>
  <li>Verify VLAN configuration</li>
</ul>

<p><strong>Layer 3 - Network</strong>: Can you reach remote networks?</p>
<ul>
  <li>Ping external IPs (8.8.8.8)</li>
  <li>Traceroute to see where packets stop</li>
  <li>Check routing table (<code class="language-plaintext highlighter-rouge">ip route</code>)</li>
</ul>

<p><strong>Layer 4+ - Transport/Application</strong>: Are services working?</p>
<ul>
  <li>Test specific ports with telnet/nc</li>
  <li>Check firewall rules</li>
  <li>Verify DNS resolution</li>
  <li>Look at application logs</li>
</ul>

<p><strong>Slow Performance</strong>:</p>
<ol>
  <li>Check bandwidth utilization</li>
  <li>Look for packet loss</li>
  <li>Measure latency</li>
  <li>Check for duplex mismatch</li>
  <li>Verify MTU settings</li>
</ol>

<h2 id="the-future-of-networking">The Future of Networking</h2>

<p>Networking continues to evolve rapidly. Let’s explore the cutting-edge technologies reshaping how we build and manage networks.</p>

<h3 id="sdn-networks-become-programmable">SDN: Networks Become Programmable</h3>

<p>Traditional networks are like city streets with fixed traffic lights. SDN makes networks programmable, like having smart traffic lights that adapt to real-time conditions.</p>

<p><strong>Components</strong>:</p>
<ul>
  <li>Controller: Centralized management</li>
  <li>Southbound API: Controller to switches (OpenFlow)</li>
  <li>Northbound API: Applications to controller</li>
</ul>

<h3 id="network-function-virtualization-nfv">Network Function Virtualization (NFV)</h3>
<p>Virtualizes network services.</p>

<p><strong>Examples</strong>:</p>
<ul>
  <li>Virtual routers</li>
  <li>Virtual firewalls</li>
  <li>Virtual load balancers</li>
</ul>

<h3 id="mpls-multiprotocol-label-switching">MPLS (Multiprotocol Label Switching)</h3>
<p>Forwards packets based on labels.</p>

<p><strong>Benefits</strong>:</p>
<ul>
  <li>Traffic engineering</li>
  <li>QoS support</li>
  <li>VPN services</li>
  <li>Reduced routing lookups</li>
</ul>

<h3 id="ipv6-transition">IPv6 Transition</h3>
<p><strong>Mechanisms</strong>:</p>
<ul>
  <li>Dual stack</li>
  <li>Tunneling (6to4, Teredo)</li>
  <li>Translation (NAT64)</li>
</ul>

<h2 id="cloud-networking">Cloud Networking</h2>

<h3 id="virtual-private-cloud-vpc">Virtual Private Cloud (VPC)</h3>
<p>Isolated network in cloud.</p>

<p><strong>Components</strong>:</p>
<ul>
  <li>Subnets</li>
  <li>Route tables</li>
  <li>Internet gateway</li>
  <li>NAT gateway</li>
  <li>Security groups</li>
</ul>

<h3 id="load-balancing">Load Balancing</h3>
<p>Distributes traffic across servers.</p>

<p><strong>Types</strong>:</p>
<ul>
  <li>Layer 4 (Transport)</li>
  <li>Layer 7 (Application)</li>
  <li>Global vs Regional</li>
</ul>

<p><strong>Algorithms</strong>:</p>
<ul>
  <li>Round robin</li>
  <li>Least connections</li>
  <li>IP hash</li>
  <li>Weighted</li>
</ul>

<h3 id="content-delivery-networks-cdn">Content Delivery Networks (CDN)</h3>
<p>Caches content at edge locations.</p>

<p><strong>Benefits</strong>:</p>
<ul>
  <li>Reduced latency</li>
  <li>Decreased bandwidth costs</li>
  <li>Improved availability</li>
  <li>DDoS protection</li>
</ul>

<h2 id="building-tomorrows-networks-advanced-implementations">Building Tomorrow’s Networks: Advanced Implementations</h2>

<p>Let’s see how these future technologies actually work by implementing them.</p>

<h3 id="programming-networks-with-openflow">Programming Networks with OpenFlow</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SDNController</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Software-Defined Network Controller</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">switches</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">topology</span> <span class="o">=</span> <span class="n">nx</span><span class="p">.</span><span class="nc">Graph</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">flow_tables</span> <span class="o">=</span> <span class="nf">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">packet_in_handlers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">statistics</span> <span class="o">=</span> <span class="nf">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="p">{</span><span class="sh">'</span><span class="s">packets</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="sh">'</span><span class="s">bytes</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
        
    <span class="k">def</span> <span class="nf">handle_switch_connect</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">,</span> <span class="n">features</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Handle switch connection</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">switches</span><span class="p">[</span><span class="n">switch_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">features</span><span class="sh">'</span><span class="p">:</span> <span class="n">features</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">ports</span><span class="sh">'</span><span class="p">:</span> <span class="n">features</span><span class="p">[</span><span class="sh">'</span><span class="s">ports</span><span class="sh">'</span><span class="p">],</span>
            <span class="sh">'</span><span class="s">flow_table_size</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
        
        <span class="c1"># Install default flows
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">install_default_flows</span><span class="p">(</span><span class="n">switch_id</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">install_flow</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Install OpenFlow rule</span><span class="sh">"""</span>
        <span class="n">flow_mod</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">match</span><span class="sh">'</span><span class="p">:</span> <span class="n">match</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">actions</span><span class="sh">'</span><span class="p">:</span> <span class="n">actions</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">priority</span><span class="sh">'</span><span class="p">:</span> <span class="n">priority</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">idle_timeout</span><span class="sh">'</span><span class="p">:</span> <span class="n">idle_timeout</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">cookie</span><span class="sh">'</span><span class="p">:</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="n">self</span><span class="p">.</span><span class="n">flow_tables</span><span class="p">[</span><span class="n">switch_id</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">flow_mod</span><span class="p">)</span>
        
        <span class="c1"># Send to switch
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">send_flow_mod</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">flow_mod</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">handle_packet_in</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">switch_id</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">packet_data</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Handle packet not matching any flow</span><span class="sh">"""</span>
        <span class="c1"># Parse packet
</span>        <span class="n">packet</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">parse_packet</span><span class="p">(</span><span class="n">packet_data</span><span class="p">)</span>
        
        <span class="c1"># Learn source MAC
</span>        <span class="n">self</span><span class="p">.</span><span class="nf">mac_learning</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">packet</span><span class="p">[</span><span class="sh">'</span><span class="s">src_mac</span><span class="sh">'</span><span class="p">],</span> <span class="n">port</span><span class="p">)</span>
        
        <span class="c1"># Find destination
</span>        <span class="n">out_port</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">find_destination</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">packet</span><span class="p">[</span><span class="sh">'</span><span class="s">dst_mac</span><span class="sh">'</span><span class="p">])</span>
        
        <span class="k">if</span> <span class="n">out_port</span><span class="p">:</span>
            <span class="c1"># Install flow for future packets
</span>            <span class="n">match</span> <span class="o">=</span> <span class="p">{</span>
                <span class="sh">'</span><span class="s">eth_dst</span><span class="sh">'</span><span class="p">:</span> <span class="n">packet</span><span class="p">[</span><span class="sh">'</span><span class="s">dst_mac</span><span class="sh">'</span><span class="p">],</span>
                <span class="sh">'</span><span class="s">eth_src</span><span class="sh">'</span><span class="p">:</span> <span class="n">packet</span><span class="p">[</span><span class="sh">'</span><span class="s">src_mac</span><span class="sh">'</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[{</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">output</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">port</span><span class="sh">'</span><span class="p">:</span> <span class="n">out_port</span><span class="p">}]</span>
            
            <span class="n">self</span><span class="p">.</span><span class="nf">install_flow</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">match</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
                            <span class="n">idle_timeout</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
            
            <span class="c1"># Send current packet
</span>            <span class="n">self</span><span class="p">.</span><span class="nf">packet_out</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">packet_data</span><span class="p">,</span> <span class="n">out_port</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Flood
</span>            <span class="n">self</span><span class="p">.</span><span class="nf">packet_out</span><span class="p">(</span><span class="n">switch_id</span><span class="p">,</span> <span class="n">packet_data</span><span class="p">,</span> <span class="sh">'</span><span class="s">FLOOD</span><span class="sh">'</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">calculate_paths</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Calculate all shortest paths in topology</span><span class="sh">"""</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">topology</span><span class="p">.</span><span class="nf">nodes</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">dst</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">topology</span><span class="p">.</span><span class="nf">nodes</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">src</span> <span class="o">!=</span> <span class="n">dst</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Primary path
</span>                        <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="p">.</span><span class="nf">shortest_path</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">topology</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> 
                                              <span class="n">weight</span><span class="o">=</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">)</span>
                        
                        <span class="c1"># Backup path (node-disjoint)
</span>                        <span class="n">temp_graph</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">topology</span><span class="p">.</span><span class="nf">copy</span><span class="p">()</span>
                        <span class="c1"># Remove intermediate nodes from primary path
</span>                        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="n">temp_graph</span><span class="p">.</span><span class="nf">remove_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                            
                        <span class="n">backup_path</span> <span class="o">=</span> <span class="bp">None</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">backup_path</span> <span class="o">=</span> <span class="n">nx</span><span class="p">.</span><span class="nf">shortest_path</span><span class="p">(</span><span class="n">temp_graph</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span>
                                                         <span class="n">weight</span><span class="o">=</span><span class="sh">'</span><span class="s">weight</span><span class="sh">'</span><span class="p">)</span>
                        <span class="k">except</span> <span class="n">nx</span><span class="p">.</span><span class="n">NetworkXNoPath</span><span class="p">:</span>
                            <span class="k">pass</span>
                            
                        <span class="n">paths</span><span class="p">[(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="sh">'</span><span class="s">primary</span><span class="sh">'</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
                            <span class="sh">'</span><span class="s">backup</span><span class="sh">'</span><span class="p">:</span> <span class="n">backup_path</span>
                        <span class="p">}</span>
                    <span class="k">except</span> <span class="n">nx</span><span class="p">.</span><span class="n">NetworkXNoPath</span><span class="p">:</span>
                        <span class="n">paths</span><span class="p">[(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">primary</span><span class="sh">'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="sh">'</span><span class="s">backup</span><span class="sh">'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
                        
        <span class="k">return</span> <span class="n">paths</span>
</code></pre></div></div>

<h3 id="p4-programming-the-data-plane">P4: Programming the Data Plane</h3>

<p>While SDN lets us program the control plane, P4 goes further—it lets us define how switches process packets. Imagine customizing not just traffic rules, but how traffic is understood.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">P4DataPlane</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Define custom packet processing behavior in switches.
    
    Use cases:
    - New protocols without hardware changes
    - In-network computing (processing data as it flows)
    - Advanced telemetry and monitoring
    </span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">tables</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">parsers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>
        
    <span class="k">def</span> <span class="nf">define_parser</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Define packet parser in P4 style</span><span class="sh">"""</span>
        <span class="n">parser_def</span> <span class="o">=</span> <span class="sh">'''</span><span class="s">
        parser MyParser(packet_in packet,
                       out headers hdr,
                       inout metadata meta,
                       inout standard_metadata_t standard_metadata) {
            
            state start {
                transition parse_ethernet;
            }
            
            state parse_ethernet {
                packet.extract(hdr.ethernet);
                transition select(hdr.ethernet.etherType) {
                    0x0800: parse_ipv4;
                    0x86DD: parse_ipv6;
                    default: accept;
                }
            }
            
            state parse_ipv4 {
                packet.extract(hdr.ipv4);
                transition select(hdr.ipv4.protocol) {
                    6: parse_tcp;
                    17: parse_udp;
                    default: accept;
                }
            }
            
            state parse_tcp {
                packet.extract(hdr.tcp);
                transition accept;
            }
        }
        </span><span class="sh">'''</span>
        <span class="k">return</span> <span class="n">parser_def</span>
        
    <span class="k">def</span> <span class="nf">define_match_action_table</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">match_fields</span><span class="p">,</span> <span class="n">actions</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Define match-action table</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">tables</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">match_fields</span><span class="sh">'</span><span class="p">:</span> <span class="n">match_fields</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">actions</span><span class="sh">'</span><span class="p">:</span> <span class="n">actions</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">:</span> <span class="p">{},</span>
            <span class="sh">'</span><span class="s">default_action</span><span class="sh">'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">size</span><span class="sh">'</span><span class="p">:</span> <span class="n">size</span>
        <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">add_table_entry</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">match_values</span><span class="p">,</span> <span class="n">action_name</span><span class="p">,</span> <span class="n">action_params</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Add entry to match-action table</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">table_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">tables</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Table </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s"> not found</span><span class="sh">"</span><span class="p">)</span>
            
        <span class="c1"># Create match key
</span>        <span class="n">match_key</span> <span class="o">=</span> <span class="nf">tuple</span><span class="p">(</span><span class="n">match_values</span><span class="p">)</span>
        
        <span class="c1"># Add entry
</span>        <span class="n">self</span><span class="p">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">][</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">match_key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">action</span><span class="sh">'</span><span class="p">:</span> <span class="n">action_name</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">params</span><span class="sh">'</span><span class="p">:</span> <span class="n">action_params</span>
        <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">process_packet</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">packet</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Process packet through P4 pipeline</span><span class="sh">"""</span>
        <span class="c1"># Parse packet
</span>        <span class="n">headers</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">parse_packet</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">ingress_port</span><span class="sh">'</span><span class="p">:</span> <span class="n">packet</span><span class="p">.</span><span class="n">ingress_port</span><span class="p">}</span>
        
        <span class="c1"># Ingress pipeline
</span>        <span class="n">headers</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">ingress_pipeline</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
        
        <span class="c1"># Egress decision
</span>        <span class="k">if</span> <span class="n">metadata</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">drop</span><span class="sh">'</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">None</span>
            
        <span class="c1"># Egress pipeline
</span>        <span class="n">headers</span><span class="p">,</span> <span class="n">metadata</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">egress_pipeline</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
        
        <span class="c1"># Deparse
</span>        <span class="n">output_packet</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">deparse_packet</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">output_packet</span><span class="p">,</span> <span class="n">metadata</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">egress_port</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="network-function-virtualization-software-defined-everything">Network Function Virtualization: Software-Defined Everything</h3>

<p>Why buy expensive hardware firewalls when software can do the job? NFV transforms network functions into software that runs on standard servers.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">VirtualNetworkFunction</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Transform hardware network appliances into flexible software.
    
    Benefits:
    - Deploy new services in minutes, not months
    - Scale up/down based on demand
    - Reduce hardware costs
    - Enable service chaining (firewall → IDS → load balancer)
    </span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">cpu_cores</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">memory_mb</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">cpu_cores</span> <span class="o">=</span> <span class="n">cpu_cores</span>
        <span class="n">self</span><span class="p">.</span><span class="n">memory_mb</span> <span class="o">=</span> <span class="n">memory_mb</span>
        <span class="n">self</span><span class="p">.</span><span class="n">rx_queue</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="nc">Queue</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">tx_queue</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="nc">Queue</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">statistics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">packets_processed</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">packets_dropped</span><span class="sh">'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">processing_time_ms</span><span class="sh">'</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">process_packet</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">packet</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Override in subclasses</span><span class="sh">"""</span>
        <span class="k">raise</span> <span class="nb">NotImplementedError</span>
        
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Main processing loop</span><span class="sh">"""</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">packet</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">rx_queue</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span>
                <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
                
                <span class="c1"># Process packet
</span>                <span class="n">result</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">process_packet</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">tx_queue</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">statistics</span><span class="p">[</span><span class="sh">'</span><span class="s">packets_processed</span><span class="sh">'</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">statistics</span><span class="p">[</span><span class="sh">'</span><span class="s">packets_dropped</span><span class="sh">'</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    
                <span class="c1"># Record processing time
</span>                <span class="n">proc_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
                <span class="n">self</span><span class="p">.</span><span class="n">statistics</span><span class="p">[</span><span class="sh">'</span><span class="s">processing_time_ms</span><span class="sh">'</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">proc_time</span><span class="p">)</span>
                
            <span class="k">except</span> <span class="n">queue</span><span class="p">.</span><span class="n">Empty</span><span class="p">:</span>
                <span class="k">continue</span>

<span class="k">class</span> <span class="nc">VirtualFirewall</span><span class="p">(</span><span class="n">VirtualNetworkFunction</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Stateful firewall VNF</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">rules_file</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">rules</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">load_rules</span><span class="p">(</span><span class="n">rules_file</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">connection_table</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">self</span><span class="p">.</span><span class="n">connection_timeout</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># seconds
</span>        
    <span class="k">def</span> <span class="nf">process_packet</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">packet</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Apply firewall rules</span><span class="sh">"""</span>
        <span class="c1"># Check established connections
</span>        <span class="n">conn_key</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">get_connection_key</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">conn_key</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">connection_table</span><span class="p">:</span>
            <span class="c1"># Update timestamp
</span>            <span class="n">self</span><span class="p">.</span><span class="n">connection_table</span><span class="p">[</span><span class="n">conn_key</span><span class="p">][</span><span class="sh">'</span><span class="s">last_seen</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">packet</span>
            
        <span class="c1"># Check rules
</span>        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">rules</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="nf">match_rule</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">rule</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">rule</span><span class="p">[</span><span class="sh">'</span><span class="s">action</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">allow</span><span class="sh">'</span><span class="p">:</span>
                    <span class="c1"># Add to connection table
</span>                    <span class="n">self</span><span class="p">.</span><span class="n">connection_table</span><span class="p">[</span><span class="n">conn_key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="sh">'</span><span class="s">created</span><span class="sh">'</span><span class="p">:</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">(),</span>
                        <span class="sh">'</span><span class="s">last_seen</span><span class="sh">'</span><span class="p">:</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">(),</span>
                        <span class="sh">'</span><span class="s">packets</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span>
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="n">packet</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">None</span>  <span class="c1"># Drop
</span>                    
        <span class="c1"># Default deny
</span>        <span class="k">return</span> <span class="bp">None</span>

<span class="k">class</span> <span class="nc">ServiceFunctionChain</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Chain multiple VNFs</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vnfs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">self</span><span class="p">.</span><span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
        
    <span class="k">def</span> <span class="nf">add_vnf</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">vnf</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Add VNF to chain</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">vnfs</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">vnf</span><span class="p">)</span>
        
        <span class="c1"># Create link queues
</span>        <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">vnfs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">link_queue</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="nc">Queue</span><span class="p">()</span>
            <span class="n">self</span><span class="p">.</span><span class="n">links</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">link_queue</span><span class="p">)</span>
            
            <span class="c1"># Connect previous VNF output to current input
</span>            <span class="n">self</span><span class="p">.</span><span class="n">vnfs</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">].</span><span class="n">tx_queue</span> <span class="o">=</span> <span class="n">link_queue</span>
            <span class="n">self</span><span class="p">.</span><span class="n">vnfs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">rx_queue</span> <span class="o">=</span> <span class="n">link_queue</span>
            
    <span class="k">def</span> <span class="nf">deploy</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Deploy service chain</span><span class="sh">"""</span>
        <span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">vnf</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">vnfs</span><span class="p">:</span>
            <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="nc">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">vnf</span><span class="p">.</span><span class="n">run</span><span class="p">)</span>
            <span class="n">thread</span><span class="p">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">thread</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span>
            <span class="n">threads</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">threads</span>
</code></pre></div></div>

<h2 id="understanding-real-world-network-behavior">Understanding Real-World Network Behavior</h2>

<p>Textbook models assume nice, predictable traffic patterns. Real networks are messier—video streams create bursts, IoT devices chirp periodically, and users create flash crowds. Let’s model realistic traffic.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">TrafficGenerator</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Generate realistic network traffic patterns</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">'</span><span class="s">poisson</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">poisson_traffic</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">self_similar</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">self_similar_traffic</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">mmpp</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">mmpp_traffic</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">heavy_tail</span><span class="sh">'</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="n">heavy_tail_traffic</span>
        <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">poisson_traffic</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Generate Poisson traffic</span><span class="sh">"""</span>
        <span class="n">timestamps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">current_time</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">while</span> <span class="n">current_time</span> <span class="o">&lt;</span> <span class="n">duration</span><span class="p">:</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">exponential</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">rate</span><span class="p">)</span>
            <span class="n">current_time</span> <span class="o">+=</span> <span class="n">interval</span>
            <span class="k">if</span> <span class="n">current_time</span> <span class="o">&lt;</span> <span class="n">duration</span><span class="p">:</span>
                <span class="n">timestamps</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="n">timestamps</span>
    
    <span class="k">def</span> <span class="nf">self_similar_traffic</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">H</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="sh">'</span><span class="s">FGN</span><span class="sh">'</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Generate self-similar traffic using Fractional Gaussian Noise</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="sh">'</span><span class="s">FGN</span><span class="sh">'</span><span class="p">:</span>
            <span class="c1"># Generate FGN with Hurst parameter H
</span>            <span class="n">n</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
            
            <span class="c1"># Covariance matrix
</span>            <span class="n">cov_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">cov_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">H</span><span class="p">)</span> <span class="o">+</span> 
                                              <span class="nf">abs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">H</span><span class="p">)</span> <span class="o">-</span> 
                                              <span class="mi">2</span><span class="o">*</span><span class="nf">abs</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">H</span><span class="p">))</span>
                    
            <span class="c1"># Generate using Cholesky decomposition
</span>            <span class="n">L</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="nf">cholesky</span><span class="p">(</span><span class="n">cov_matrix</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            <span class="n">fgn</span> <span class="o">=</span> <span class="n">L</span> <span class="o">@</span> <span class="n">z</span>
            
            <span class="c1"># Convert to arrival process
</span>            <span class="n">arrivals</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">cumsum</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">exp</span><span class="p">(</span><span class="n">fgn</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">arrivals</span>
</code></pre></div></div>

<h2 id="network-monitoring">Network Monitoring</h2>

<h3 id="snmp-simple-network-management-protocol">SNMP (Simple Network Management Protocol)</h3>
<p>Monitor and manage network devices.</p>

<p><strong>Components</strong>:</p>
<ul>
  <li>Manager: Monitoring system</li>
  <li>Agent: Device software</li>
  <li>MIB: Management Information Base</li>
</ul>

<h3 id="netflowsflow">NetFlow/sFlow</h3>
<p>Collect traffic flow data.</p>

<p><strong>Use Cases</strong>:</p>
<ul>
  <li>Traffic analysis</li>
  <li>Security monitoring</li>
  <li>Capacity planning</li>
  <li>Billing</li>
</ul>

<h3 id="network-performance-metrics">Network Performance Metrics</h3>
<ul>
  <li><strong>Bandwidth</strong>: Maximum data rate</li>
  <li><strong>Throughput</strong>: Actual data rate</li>
  <li><strong>Latency</strong>: Delay in transmission</li>
  <li><strong>Jitter</strong>: Variation in latency</li>
  <li><strong>Packet loss</strong>: Dropped packets</li>
</ul>

<h2 id="best-practices">Best Practices</h2>

<h3 id="network-design">Network Design</h3>
<ul>
  <li>Follow hierarchical model (core, distribution, access)</li>
  <li>Implement redundancy</li>
  <li>Use standard protocols</li>
  <li>Document everything</li>
  <li>Plan for growth</li>
</ul>

<h3 id="security">Security</h3>
<ul>
  <li>Implement defense in depth</li>
  <li>Use strong encryption</li>
  <li>Regular security audits</li>
  <li>Keep firmware updated</li>
  <li>Monitor for anomalies</li>
</ul>

<h3 id="performance">Performance</h3>
<ul>
  <li>Optimize routing paths</li>
  <li>Implement QoS appropriately</li>
  <li>Monitor utilization</li>
  <li>Use caching where possible</li>
  <li>Regular capacity planning</li>
</ul>

<h2 id="the-cutting-edge-research-changing-networking">The Cutting Edge: Research Changing Networking</h2>

<p>The internet was designed for connecting computers. Today’s challenges—content delivery, IoT, quantum computing—require fundamentally new approaches.</p>

<h3 id="information-centric-networking-content-over-connections">Information-Centric Networking: Content Over Connections</h3>

<p>Today’s internet cares about WHERE (which server), but users care about WHAT (which video). ICN reimagines networking around content, not locations.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">NamedDataNetworking</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">NDN/CCN implementation</span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">content_store</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Cache
</span>        <span class="n">self</span><span class="p">.</span><span class="n">pit</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Pending Interest Table
</span>        <span class="n">self</span><span class="p">.</span><span class="n">fib</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Forwarding Information Base
</span>        
    <span class="k">def</span> <span class="nf">handle_interest</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">incoming_face</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Process Interest packet</span><span class="sh">"""</span>
        <span class="c1"># Check content store
</span>        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">content_store</span><span class="p">:</span>
            <span class="c1"># Cache hit - return data
</span>            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">content_store</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            
        <span class="c1"># Check PIT
</span>        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">pit</span><span class="p">:</span>
            <span class="c1"># Add incoming face to existing entry
</span>            <span class="n">self</span><span class="p">.</span><span class="n">pit</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="sh">'</span><span class="s">faces</span><span class="sh">'</span><span class="p">].</span><span class="nf">add</span><span class="p">(</span><span class="n">incoming_face</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Create new PIT entry
</span>            <span class="n">self</span><span class="p">.</span><span class="n">pit</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="sh">'</span><span class="s">faces</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span><span class="n">incoming_face</span><span class="p">},</span>
                <span class="sh">'</span><span class="s">timestamp</span><span class="sh">'</span><span class="p">:</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
            <span class="p">}</span>
            
        <span class="c1"># Forward based on FIB
</span>        <span class="n">next_hops</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">fib_lookup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">next_hop</span> <span class="ow">in</span> <span class="n">next_hops</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">next_hop</span> <span class="o">!=</span> <span class="n">incoming_face</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="nf">forward_interest</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">next_hop</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="bp">None</span>
</code></pre></div></div>

<h3 id="network-coding-breaking-the-store-and-forward-paradigm">Network Coding: Breaking the Store-and-Forward Paradigm</h3>

<p>Traditional routers just forward packets. What if they could combine packets mathematically, increasing throughput and reliability?</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">NetworkCoding</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Mix packets mathematically instead of just forwarding them.
    
    Benefits:
    - Increased throughput in multicast
    - Better reliability in wireless networks
    - Reduced retransmissions
    
    Think of it like this: Instead of carrying individual letters,
    the postal service could carry mathematical combinations that
    let recipients reconstruct any lost letters.
    </span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">field_size</span><span class="o">=</span><span class="mi">256</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">field_size</span> <span class="o">=</span> <span class="n">field_size</span>
        
    <span class="k">def</span> <span class="nf">encode_generation</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">packets</span><span class="p">,</span> <span class="n">num_coded</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Create coded packets from generation</span><span class="sh">"""</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">packets</span><span class="p">)</span>
        <span class="n">coded_packets</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">num_coded</span><span class="p">):</span>
            <span class="c1"># Random coefficients
</span>            <span class="n">coeffs</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">field_size</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            
            <span class="c1"># Linear combination in finite field
</span>            <span class="n">coded_data</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros_like</span><span class="p">(</span><span class="n">packets</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">packet</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">packets</span><span class="p">):</span>
                <span class="n">coded_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">coded_data</span> <span class="o">+</span> <span class="n">coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">packet</span><span class="p">)</span> <span class="o">%</span> <span class="n">self</span><span class="p">.</span><span class="n">field_size</span>
                
            <span class="n">coded_packets</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span>
                <span class="sh">'</span><span class="s">coefficients</span><span class="sh">'</span><span class="p">:</span> <span class="n">coeffs</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">:</span> <span class="n">coded_data</span>
            <span class="p">})</span>
            
        <span class="k">return</span> <span class="n">coded_packets</span>
    
    <span class="k">def</span> <span class="nf">decode_generation</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">coded_packets</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Decode using Gaussian elimination</span><span class="sh">"""</span>
        <span class="c1"># Build coefficient matrix
</span>        <span class="n">n</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">coded_packets</span><span class="p">)</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="n">pkt</span><span class="p">[</span><span class="sh">'</span><span class="s">coefficients</span><span class="sh">'</span><span class="p">]</span> <span class="k">for</span> <span class="n">pkt</span> <span class="ow">in</span> <span class="n">coded_packets</span><span class="p">])</span>
        <span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="n">pkt</span><span class="p">[</span><span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">]</span> <span class="k">for</span> <span class="n">pkt</span> <span class="ow">in</span> <span class="n">coded_packets</span><span class="p">])</span>
        
        <span class="c1"># Solve in finite field
</span>        <span class="n">decoded</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">gaussian_elimination_gf</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">decoded</span>
</code></pre></div></div>

<h3 id="quantum-networking-unhackable-communications">Quantum Networking: Unhackable Communications</h3>

<p>Quantum mechanics enables fundamentally secure communication. By encoding information in quantum states, we can detect any eavesdropping attempt.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">QuantumNetwork</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">Implement quantum communication protocols.
    
    Revolutionary properties:
    - Unconditional security (physics, not math)
    - Detection of eavesdropping
    - Quantum teleportation of states
    
    Current challenges:
    - Limited distance (~100km)
    - Requires special hardware
    - Very low data rates
    </span><span class="sh">"""</span>
    
    <span class="k">def</span> <span class="nf">quantum_teleportation</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">alice_qubit</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Teleport quantum state</span><span class="sh">"""</span>
        <span class="c1"># Create entangled pair
</span>        <span class="n">bell_pair</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">create_bell_pair</span><span class="p">()</span>
        
        <span class="c1"># Alice performs Bell measurement
</span>        <span class="n">measurement</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">bell_measurement</span><span class="p">(</span><span class="n">alice_qubit</span><span class="p">,</span> <span class="n">bell_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        
        <span class="c1"># Send classical bits to Bob
</span>        <span class="n">classical_bits</span> <span class="o">=</span> <span class="n">measurement</span>
        
        <span class="c1"># Bob applies corrections
</span>        <span class="n">bob_qubit</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">apply_corrections</span><span class="p">(</span><span class="n">bell_pair</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">classical_bits</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">bob_qubit</span>
    
    <span class="k">def</span> <span class="nf">quantum_key_distribution</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">BB84 QKD protocol</span><span class="sh">"""</span>
        <span class="c1"># Alice prepares random bits in random bases
</span>        <span class="n">alice_bits</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">)</span>
        <span class="n">alice_bases</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">)</span>
        
        <span class="c1"># Bob measures in random bases
</span>        <span class="n">bob_bases</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">)</span>
        
        <span class="c1"># Sift key
</span>        <span class="n">matching_bases</span> <span class="o">=</span> <span class="n">alice_bases</span> <span class="o">==</span> <span class="n">bob_bases</span>
        <span class="n">sifted_key</span> <span class="o">=</span> <span class="n">alice_bits</span><span class="p">[</span><span class="n">matching_bases</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="n">sifted_key</span>
</code></pre></div></div>

<h2 id="continuing-your-networking-journey">Continuing Your Networking Journey</h2>

<p>Networking is a vast field that continues to evolve. Here are resources to deepen your understanding.</p>

<h3 id="foundational-textbooks">Foundational Textbooks</h3>
<ol>
  <li><strong>Peterson &amp; Davie</strong> - “Computer Networks: A Systems Approach” (6th Edition)</li>
  <li><strong>Kurose &amp; Ross</strong> - “Computer Networking: A Top-Down Approach” (8th Edition)</li>
  <li><strong>Bertsekas &amp; Gallager</strong> - “Data Networks” (2nd Edition)</li>
  <li><strong>Kleinrock</strong> - “Queueing Systems” (Volumes 1 &amp; 2)</li>
</ol>

<h3 id="landmark-papers-that-shaped-networking">Landmark Papers That Shaped Networking</h3>

<p><strong>The Problems That Started It All:</strong></p>
<ul>
  <li>
    <p><strong>Jacobson (1988)</strong> - “Congestion Avoidance and Control”<br />
<em>Why it matters:</em> Saved the internet from collapse in the 1980s</p>
  </li>
  <li>
    <p><strong>Cardwell et al. (2016)</strong> - “BBR: Congestion-Based Congestion Control”<br />
<em>Why it matters:</em> Made YouTube and Google services noticeably faster</p>
  </li>
</ul>

<p><strong>Revolutionizing How We Build Networks:</strong></p>
<ul>
  <li><strong>McKeown et al. (2008)</strong> - “OpenFlow: Enabling Innovation in Campus Networks”<br />
<em>Why it matters:</em> Launched the SDN revolution, making networks programmable</li>
</ul>

<p><strong>Breaking Theoretical Limits:</strong></p>
<ul>
  <li><strong>Ahlswede et al. (2000)</strong> - “Network Information Flow”<br />
<em>Why it matters:</em> Showed that mixing data beats store-and-forward</li>
</ul>

<p><strong>Reimagining the Internet:</strong></p>
<ul>
  <li><strong>Jacobson et al. (2009)</strong> - “Networking Named Content”<br />
<em>Why it matters:</em> Proposed focusing on what we want, not where it is</li>
</ul>

<h3 id="whats-next-active-research-areas">What’s Next: Active Research Areas</h3>

<p><strong>Making Networks Smarter:</strong></p>
<ul>
  <li><strong>Machine Learning for Networks</strong>: Self-optimizing networks that learn traffic patterns</li>
  <li><strong>Intent-Based Networking</strong>: Tell the network what you want, not how to do it</li>
</ul>

<p><strong>Ultra-Low Latency:</strong></p>
<ul>
  <li><strong>Time-Sensitive Networking</strong>: Guaranteed microsecond-level latency for industrial control</li>
  <li><strong>Edge Computing</strong>: Process data closer to users for AR/VR and autonomous vehicles</li>
</ul>

<p><strong>Verification and Security:</strong></p>
<ul>
  <li><strong>Network Verification</strong>: Mathematical proofs that networks behave correctly</li>
  <li><strong>Zero Trust Architecture</strong>: Assume no trust, verify everything</li>
</ul>

<p><strong>New Computing Paradigms:</strong></p>
<ul>
  <li><strong>In-Network Computing</strong>: Routers that process data, not just forward it</li>
  <li><strong>Quantum Internet</strong>: Connect quantum computers globally</li>
</ul>

<h2 id="see-also">See Also</h2>
<ul>
  <li><a href="cybersecurity.html">Cybersecurity</a> - Network security details</li>
  <li><a href="aws.html">AWS</a> - Cloud networking</li>
  <li><a href="docker.html">Docker</a> - Container networking</li>
  <li><a href="kubernetes.html">Kubernetes</a> - Cluster networking</li>
  <li><a href="quantumcomputing.html">Quantum Computing</a> - Quantum communication</li>
</ul>

        </article>

        
          <aside class="toc-sidebar">
            <nav class="toc">
              <h4 class="toc-title">
                <i class="fas fa-cog"></i>
                On This Page
              </h4>
              <div class="toc-content"></div>
            </nav>
          </aside>
        
      </main>
    </div>

    <script src="/Documentation/assets/js/navigation.js"></script>
    <script>
      // Generate table of contents
      if (document.querySelector('.toc')) {
        const headings = document.querySelectorAll('.page-content h2, .page-content h3');
        const tocContent = document.querySelector('.toc-content');
        
        if (headings.length > 0) {
          const tocList = document.createElement('ul');
          tocList.className = 'toc-list';
          
          headings.forEach(heading => {
            if (!heading.id) {
              heading.id = heading.textContent.toLowerCase()
                .replace(/[^\w\s]/g, '')
                .replace(/\s+/g, '-');
            }
            
            const li = document.createElement('li');
            li.className = heading.tagName.toLowerCase();
            
            const a = document.createElement('a');
            a.href = '#' + heading.id;
            a.textContent = heading.textContent;
            
            li.appendChild(a);
            tocList.appendChild(li);
          });
          
          tocContent.appendChild(tocList);
        }
      }
    </script>
  </body>
</html>